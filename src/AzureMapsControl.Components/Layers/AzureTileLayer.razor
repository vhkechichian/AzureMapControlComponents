@namespace AzureMapsControl.Components.Layers

@inject Microsoft.JSInterop.IJSRuntime JSRuntime
@inject AzureMapsControl.Components.Map.MapService MapService

@using Microsoft.JSInterop

@code {

    /// <summary>
    /// Id of the layer
    /// </summary>
    [Parameter]
    public string Id { get; set; }

    /// <summary>
    /// LayerId before which the new layer will be added
    /// </summary>
    [Parameter]
    public string Before { get; set; }

    /// <summary>
    /// Options of the layer
    /// </summary>
    [Parameter]
    public TileLayerOptions Options { get; set; }

    protected override void OnInitialized()
    {
        MapService.OnMapReadyAsync += OnMapReadyAsync;
        base.OnInitialized();
    }

    private async Task OnMapReadyAsync()
    {
        await JSRuntime.InvokeVoidAsync(Extensions.MethodAddTileLayer.ToAzureMapsControlNamespace(),
                    Id,
                    Before,
                    Options);
    }

}
