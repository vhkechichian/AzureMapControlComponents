trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:

- task: NuGetCommand@2
  displayName: 'Install GitVersion'
  inputs:
    command: custom
    arguments: install GitVersion.CommandLine -Version 4.0.0 -OutputDirectory $(Build.BinariesDirectory)/tools -ExcludeVersion

- script: mono $(Build.BinariesDirectory)/tools/GitVersion.CommandLine/tools/GitVersion.exe /output buildserver /nofetch
- script: dotnet build ./src/AzureMapsControl.Components/AzureMapsControl.Components.csproj -c Release /p:Version='$(GitVersion.NugetVersion)'
- script: dotnet pack ./src/AzureMapsControl.Components/AzureMapsControl.Components.csproj -c Release --no-build -o '$(build.artifactStagingDirectory)'