@page "/HtmlMarkersEvents"

@using AzureMapsControl.Components.Map
<AzureMap Id="map"
          EventActivationFlags="MapEventActivationFlags
                                .None
                                .Enable(MapEventType.Ready)"
          OnReady="OnMapReady" />

@code  {

    private AzureMapsControl.Components.Markers.HtmlMarker _marker;

    public async Task OnMapReady(MapEventArgs events)
    {
        _marker = new AzureMapsControl.Components.Markers.HtmlMarker(
            new Components.Markers.HtmlMarkerOptions
            {
                Position = new Components.Atlas.Position(0, 0),
                Draggable = true
            },
            AzureMapsControl.Components.Markers.HtmlMarkerEventActivationFlags.None.Enable(AzureMapsControl.Components.Markers.HtmlMarkerEventType.Click));

        _marker.OnClick += (args) =>
        {
            Console.WriteLine(args);
        };

        await events.Map.AddHtmlMarkersAsync(_marker);
    }
}